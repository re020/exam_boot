(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-62f1"],{"3HAv":function(e,t,a){"use strict";var n=a("t3Un");t.a={save:function(e){return Object(n.a)({url:"/bank/add",method:"post",data:e})},update:function(e){return Object(n.a)({url:"/bank/update",method:"put",data:e})},list:function(e){return Object(n.a)({url:"/bank/list",method:"post",data:e})},all:function(){return Object(n.a)({url:"/bank/all",method:"get"})},get:function(e){return Object(n.a)({url:"/bank/get/"+e,method:"get"})},delete:function(e){return Object(n.a)({url:"/bank/delete/"+e,method:"delete"})}}},"7HY+":function(e,t,a){"use strict";var n=a("t3Un");t.a={save:function(e){return Object(n.a)({url:"/bankType/addType",method:"post",data:e})},list:function(e){return Object(n.a)({url:"/bankType/list/"+e,method:"get"})},delete:function(e){return Object(n.a)({url:"/bankType/delete/"+e,method:"delete"})}}},"7WTT":function(e,t,a){"use strict";a.r(t);var n=a("twU4"),i=a("3HAv"),l=(a("oBwb"),a("7HY+"),{data:function(){return{permission:this.$store.getters.auths,imageUrl:"",dialogFormVisible:!1,page:{currentPage:1,currentCount:10,totalCount:null,totalPage:null,sortName:"",sortOrder:"asc",params:{dictType:"college"},list:[]},bank:{bankId:"",bankName:"",bankImg:"",bankCollege:"",bankSubject:""},rules:{bankName:[{required:!0,message:"请输入题库名",trigger:"blur"}]},collegeList:[],subjectList:[],dialogTitle:"新增题库",imgLoading:!1}},methods:{handleSizeChange:function(e){this.page.currentCount=e,this.list()},handleCurrentChange:function(e){this.page.currentPage=e,this.list()},sortHandler:function(e){this.page.sortName=e.prop,this.page.sortOrder=e.order,this.list()},save:function(){var e=this;this.$refs.bank.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.$store.commit("SET_LOADING",!0),""!=e.bank.bankId?i.a.update(e.bank).then(function(t){200==t.code&&(e.dialogFormVisible=!1,e.$message.success(t.msg),e.list())}):i.a.save(e.bank).then(function(t){200==t.code?(e.dialogFormVisible=!1,e.$message.success(t.msg),e.list()):(e.dialogFormVisible=!1,e.$message.error("保存失败!"))})})},list:function(){var e=this;this.$store.commit("SET_LOADING",!0),i.a.list(this.page).then(function(t){e.page=t.data})},toUpdate:function(e){var t=this;this.dialogTitle="修改题库",i.a.get(e).then(function(e){t.bank=e.data,t.imageUrl=t.bank.bankImg}),this.dialogFormVisible=!0},toAdd:function(){this.dialogTitle="新增题库",this.bank={bankId:""},this.dialogFormVisible=!0,this.imageUrl=""},toDelete:function(e){var t=this;this.$confirm("确定删除这条记录?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"}).then(function(){i.a.delete(e).then(function(e){200==e.code?(t.$message({message:e.msg,type:"success"}),t.list()):t.$message.error("删除失败")})})},getCollege:function(){var e=this;n.a.all({dictType:"college"}).then(function(t){e.collegeList=t.data})},getSubject:function(){var e=this;n.a.all({dictType:"subject"}).then(function(t){e.subjectList=t.data})},search:function(){this.list()},getMajor:function(e){},handleAvatarSuccess:function(e,t){this.imageUrl=e.data.fileUrl,this.bank.bankImg=this.imageUrl,this.$message.success(e.msg),this.imgLoading=!1},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type,a=e.size/1024/1024<5;if(t){if(a)return this.imgLoading=!0,t&&a;this.$message.error("上传图片大小不能超过 5MB!")}else this.$message.error("上传图片只支持 JPG、JPEG、PNG 格式!")},toKnowledge:function(e){this.$router.push({name:"knowledge",params:{bankId:e}})}},created:function(){this.list(),this.getCollege(),this.getSubject()}}),s=(a("BMrC"),a("ZrdR")),r=Object(s.a)(l,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"table-header"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.page,size:"mini"}},[a("el-form-item",{attrs:{label:"题库名"}},[a("el-input",{attrs:{placeholder:"题库名",clearable:""},model:{value:e.page.params.bankName,callback:function(t){e.$set(e.page.params,"bankName",t)},expression:"page.params.bankName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"学院"}},[a("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择"},model:{value:e.page.params.bankCollege,callback:function(t){e.$set(e.page.params,"bankCollege",t)},expression:"page.params.bankCollege"}},e._l(e.collegeList,function(e){return a("el-option",{key:e.dictId,attrs:{label:e.dictName,value:e.dictId}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"科目"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择",clearable:""},model:{value:e.page.params.bankSubject,callback:function(t){e.$set(e.page.params,"bankSubject",t)},expression:"page.params.bankSubject"}},e._l(e.subjectList,function(e){return a("el-option",{key:e.dictId,attrs:{label:e.dictName,value:e.dictId}})}))],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.search}},[e._v("查询")])],1)],1),e._v(" "),a("el-divider"),e._v(" "),e.permission.indexOf("bank:add")>=0?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.toAdd}},[e._v("添加")]):e._e()],1),e._v(" "),a("el-row",{directives:[{name:"loading",rawName:"v-loading",value:this.$store.getters.loading,expression:"this.$store.getters.loading"}]},e._l(e.page.list,function(t){return a("el-col",{key:t.bankId,attrs:{span:6,offset:1}},[a("el-card",{staticClass:"bank-card",staticStyle:{padding:"0px"},attrs:{"body-style":{padding:"0px"},shadow:"hover"}},[a("img",{staticClass:"image",attrs:{src:t.bankImg,alt:t.bankName}}),e._v(" "),a("div",{staticStyle:{padding:"8px"}},[a("p",[e._v("题库名称: "+e._s(t.bankName))]),e._v(" "),a("p",[e._v("学院: "+e._s(t.college.dictName))]),e._v(" "),a("p",[e._v("科目: "+e._s(t.subject.dictName))])]),e._v(" "),a("el-dropdown",{staticStyle:{float:"right"}},[a("span",{staticClass:"el-dropdown-link"},[a("el-button",{attrs:{icon:"el-icon-menu",plain:"",size:"mini"}})],1),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[e.permission.indexOf("bank:update")>=0?a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(a){e.toUpdate(t.bankId)}}},[e._v("编辑")]):e._e()],1),e._v(" "),a("el-dropdown-item",[e.permission.indexOf("know:list")>=0?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){e.toKnowledge(t.bankId)}}},[e._v("知识点")]):e._e()],1),e._v(" "),a("el-dropdown-item",[e.permission.indexOf("bank:delete")>=0?a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){e.toDelete(t.bankId)}}},[e._v("删除")]):e._e()],1)],1)],1)],1)],1)})),e._v(" "),a("div",{staticClass:"page-div banklist-page"},[a("el-pagination",{attrs:{"current-page":e.page.currentPage,"page-sizes":[10,15,20,30],"page-size":e.page.currentCount,layout:"total, sizes, prev, pager, next, jumper",total:e.page.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:this.$store.getters.loading,expression:"this.$store.getters.loading"}],attrs:{title:e.dialogTitle,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"bank",attrs:{rules:e.rules,model:e.bank,"label-width":"80px",size:"mini"}},[a("el-form-item",{attrs:{label:"题库名称",prop:"bankName"}},[a("el-input",{attrs:{clearable:""},model:{value:e.bank.bankName,callback:function(t){e.$set(e.bank,"bankName",t)},expression:"bank.bankName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"学院"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择",clearable:""},model:{value:e.bank.bankCollege,callback:function(t){e.$set(e.bank,"bankCollege",t)},expression:"bank.bankCollege"}},e._l(e.collegeList,function(e){return a("el-option",{key:e.dictId,attrs:{label:e.dictName,value:e.dictId}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"科目"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择",clearable:""},model:{value:e.bank.bankSubject,callback:function(t){e.$set(e.bank,"bankSubject",t)},expression:"bank.bankSubject"}},e._l(e.subjectList,function(e){return a("el-option",{key:e.dictId,attrs:{label:e.dictName,value:e.dictId}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"上传封面:"}},[a("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:e.imgLoading,expression:"imgLoading"}],staticClass:"avatar-uploader",attrs:{action:"http://tn20898453.51mypc.cn/upload","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload,name:"file"}},[e.imageUrl?a("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("提交")]),e._v(" "),a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")])],1)],1)],1)],1)},[],!1,null,"514f9dd6",null);r.options.__file="BankList.vue";t.default=r.exports},BMrC:function(e,t,a){"use strict";var n=a("R/is");a.n(n).a},"R/is":function(e,t,a){},oBwb:function(e,t,a){"use strict";var n=a("t3Un");t.a={save:function(e){return""===e.typeId?Object(n.a)({url:"/type/add",method:"post",data:e}):Object(n.a)({url:"/type/update",method:"put",data:e})},list:function(e){return Object(n.a)({url:"/type/list",method:"post",data:e})},get:function(e){return Object(n.a)({url:"/type/get/"+e,method:"get"})},delete:function(e){return Object(n.a)({url:"/type/delete/"+e,method:"delete"})},update:function(e){return Object(n.a)({url:"/type/update",method:"put",data:e})},all:function(){return Object(n.a)({url:"/type/all",method:"get"})},allByKnowIds:function(e){return Object(n.a)({url:"/type/all",method:"post",data:e})},allByKnow:function(e){return Object(n.a)({url:"/type/all/"+e,method:"get"})}}},twU4:function(e,t,a){"use strict";var n=a("t3Un");t.a={save:function(e){return""===e.dictId?Object(n.a)({url:"/dict/add",method:"post",data:e}):Object(n.a)({url:"/dict/update",method:"put",data:e})},list:function(e){return Object(n.a)({url:"/dict/list",method:"post",data:e})},get:function(e){return Object(n.a)({url:"/dict/get/"+e,method:"get"})},delete:function(e){return Object(n.a)({url:"/dict/delete/"+e,method:"delete"})},all:function(e){return Object(n.a)({url:"/dict/all",method:"post",data:e})},getByFather:function(e){return Object(n.a)({url:"/dict/childList/"+e,method:"get"})}}}}]);