(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-96c4"],{W82g:function(e,t,s){"use strict";var a=s("oUcV");s.n(a).a},oUcV:function(e,t,s){},raGL:function(e,t,s){"use strict";s.r(t);var a=s("t3Un"),l=function(e){return Object(a.a)({url:"/student/add",method:"post",data:e})},r=function(e){return Object(a.a)({url:"/student/update",method:"put",data:e})},i=function(e){return Object(a.a)({url:"/student/resetPwd",method:"put",data:e})},n=function(){return Object(a.a)({url:"/student/resetAll",method:"get"})},o=function(e){return Object(a.a)({url:"/student/list",method:"post",data:e})},u=function(e){return Object(a.a)({url:"/student/get/"+e,method:"get"})},d=function(e){return Object(a.a)({url:"/student/delete/"+e,method:"delete"})},c=s("twU4"),m=(s("vqCa"),{data:function(){return{permission:this.$store.getters.auths,admissionTime:null,dialogFormVisible:!1,dialogRoleTree:!1,dialogResumeVisible:!1,page:{currentPage:1,currentCount:10,totalCount:null,totalPage:null,sortName:"",sortOrder:"asc",params:{majorId:"",collegeId:"",stuSex:"",startTime:"",endTime:"",stuNumber:"",stuName:"",stuCard:""},list:[]},student:{stuId:"",stuNumber:"",stuPassword:"",stuCard:"",stuName:"",stuSex:"",stuAge:"",stuMajor:"",stuImg:"",stuEntranceTime:"",stuCollege:""},rules:{stuNumber:[{required:!0,message:"请输入学号",trigger:"blur"}],stuPassword:[{required:!0,message:"请输入密码",trigger:"blur"}],stuName:[{required:!0,message:"请输入姓名",trigger:"blur"}],stuSex:[{required:!0,message:"请选择性别",trigger:"blur"}],stuAge:[{required:!0,message:"年龄不能为空",trigger:"blur"}],stuImg:[{required:!0,message:"请输入题库名",trigger:"blur"}],stuCard:[{required:!0,message:"身份证号码不能为空",trigger:"blur"}]},collegeList:[],majorList:[],majorList0:[],college:{dictId:"",dictName:""},major:{dictId:"",dictName:""},imageUrl:"",imgLoading:!1,isdisabledFn:!1,dialogTitle:"新增学生",currentPage4:4,selectIds:[]}},methods:{handleSizeChange:function(e){this.page.currentCount=e,this.list()},handleCurrentChange:function(e){this.page.currentPage=e,this.list()},sortHandler:function(e){this.page.sortName=e.prop,this.page.sortOrder=e.order,this.list()},save:function(){var e=this;""!=this.student.stuId?this.$refs.student.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.$store.commit("SET_LOADING",!0),r(e.student).then(function(t){200==t.code&&(e.dialogFormVisible=!1,e.$message.success(t.msg),e.list())})}):this.$refs.student.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.$store.commit("SET_LOADING",!0),l(e.student).then(function(t){200==t.code?(e.dialogFormVisible=!1,e.$message.success(t.msg),e.list()):(e.dialogFormVisible=!1,e.$message.error("保存失败!"))})})},list:function(){var e=this;this.$store.commit("SET_LOADING",!0),null!=this.timeInterval?(this.page.params.startTime=this.timeInterval[0],this.page.params.endTime=this.timeInterval[1]):(this.page.params.startTime="",this.page.params.endTime=""),o(this.page).then(function(t){200==t.code&&(e.page=t.data)})},toUpdate:function(e){var t=this;this.majorList0=this.majorList,u(e).then(function(e){200==e.code&&(t.student=e.data,t.imageUrl=t.student.stuImg,t.dialogTitle="修改学生",t.dialogFormVisible=!0,t.isdisabledFn=!0)})},getDetails:function(e){var t=this;u(e).then(function(e){200==e.code&&(t.student=e.data,t.dialogResumeVisible=!0)})},toAdd:function(){this.college={collegeId:"",collegeName:""},this.major={majorId:"",majorName:""},this.dialogTitle="新增学生",this.dialogFormVisible=!0,this.isdisabledFn=!1},toDelete:function(e){var t=this;this.$confirm("确定删除这条记录?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",student:"error"}).then(function(){d(e).then(function(e){200==e.code?t.$message({message:e.msg,student:"success"}):t.$message({message:e.msg,student:"error"}),t.list()})})},getCollege:function(){var e=this;c.a.all({dictType:"college"}).then(function(t){e.collegeList=t.data})},getMajor:function(){var e=this;c.a.all({dictType:"major"}).then(function(t){e.majorList=t.data})},getSon:function(e){var t=this;c.a.getByFather(e).then(function(e){t.majorList0=e.data})},handleAvatarSuccess:function(e,t){this.imageUrl=e.data.fileUrl,this.student.stuImg=this.imageUrl,this.$message.success(e.msg),this.imgLoading=!1},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type,s=e.size/1024/1024<5;if(t){if(s)return this.imgLoading=!0,t&&s;this.$message.error("上传图片大小不能超过 5MB!")}else this.$message.error("上传图片只支持 JPG、JPEG、PNG 格式!")},search:function(){this.list()},changeSelect:function(e){var t=e.map(function(e){return e.stuId});this.selectIds=t},resetPwd:function(){var e=this;this.$confirm("密码将会重置为学号后6位，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i(e.selectIds).then(function(t){200==t.code&&e.$message.success(t.msg),e.list()})})},resetAll:function(){var e=this;this.$confirm("密码将会重置为学号后6位，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"danger"}).then(function(){n().then(function(t){200==t.code&&e.$message.success(t.msg),e.list()})})}},created:function(){this.list(),this.getCollege(),this.getMajor()}}),p=(s("W82g"),s("ZrdR")),g=Object(p.a)(m,function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"table-header"},[s("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.page,size:"mini"}},[s("el-form-item",{attrs:{label:"姓名"}},[s("el-input",{attrs:{placeholder:"学生名",clearable:""},model:{value:e.page.params.stuName,callback:function(t){e.$set(e.page.params,"stuName",t)},expression:"page.params.stuName"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"学号"}},[s("el-input",{attrs:{placeholder:"学号",clearable:""},model:{value:e.page.params.stuNumber,callback:function(t){e.$set(e.page.params,"stuNumber",t)},expression:"page.params.stuNumber"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"性别"}},[s("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择"},model:{value:e.page.params.stuSex,callback:function(t){e.$set(e.page.params,"stuSex",t)},expression:"page.params.stuSex"}},[s("el-option",{key:"1",attrs:{label:"男",value:"1"}}),e._v(" "),s("el-option",{key:"2",attrs:{label:"女",value:"2"}})],1)],1),e._v(" "),s("el-form-item",{attrs:{label:"专业"}},[s("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择"},model:{value:e.page.params.majorId,callback:function(t){e.$set(e.page.params,"majorId",t)},expression:"page.params.majorId"}},e._l(e.majorList,function(e){return s("el-option",{key:e.dictId,attrs:{label:e.dictName,value:e.dictId}})}))],1),e._v(" "),s("el-form-item",{attrs:{label:"学院"}},[s("el-select",{attrs:{clearable:"",filterable:"",placeholder:"请选择"},model:{value:e.page.params.collegeId,callback:function(t){e.$set(e.page.params,"collegeId",t)},expression:"page.params.collegeId"}},e._l(e.collegeList,function(e){return s("el-option",{key:e.dictId,attrs:{label:e.dictName,value:e.dictId}})}))],1),e._v(" "),s("el-form-item",{attrs:{label:"入学时间区间"}},[s("div",{staticClass:"block"},[s("el-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.admissionTime,callback:function(t){e.admissionTime=t},expression:"admissionTime"}})],1)]),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")])],1)],1),e._v(" "),s("el-divider"),e._v(" "),e.permission.indexOf("user:student:add")>=0?s("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.toAdd}},[e._v("添加")]):e._e(),e._v(" "),e.permission.indexOf("user:student:update")>=0?s("el-button",{attrs:{type:"warning",size:"mini"},on:{click:e.resetPwd}},[e._v("重置密码")]):e._e(),e._v(" "),e.permission.indexOf("user:student:update")>=0?s("el-button",{attrs:{type:"danger",size:"mini"},on:{click:e.resetAll}},[e._v("全部密码重置")]):e._e()],1),e._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:this.$store.getters.loading,expression:"this.$store.getters.loading"}],staticStyle:{width:"100%"},attrs:{data:e.page.list,border:"",stripe:"",size:"mini"},on:{"sort-change":e.sortHandler,"selection-change":e.changeSelect}},[s("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),s("el-table-column",{attrs:{prop:"stuNumber",sortable:"custom",label:"学号"}}),e._v(" "),s("el-table-column",{attrs:{prop:"stuName",sortable:"custom",label:"姓名"}}),e._v(" "),s("el-table-column",{attrs:{sortable:"custom",label:"性别"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(1==t.row.stuSex?"男":"女"))])]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"stuAge",sortable:"custom",label:"年龄"}}),e._v(" "),s("el-table-column",{attrs:{prop:"major.dictName",sortable:"custom",label:"专业"}}),e._v(" "),s("el-table-column",{attrs:{prop:"stuEntranceTime",sortable:"custom",label:"入学时间"}}),e._v(" "),s("el-table-column",{attrs:{prop:"college.dictName",sortable:"custom",label:"学院"}}),e._v(" "),s("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-dropdown",[s("el-button",{attrs:{type:"primary",size:"mini"}},[e._v("\n            操作\n            "),s("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",[e.permission.indexOf("user:student:update")>=0?s("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(s){e.toUpdate(t.row.stuId)}}},[e._v("编辑")]):e._e()],1),e._v(" "),s("el-dropdown-item",[s("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(s){e.getDetails(t.row.stuId)}}},[e._v("查看详情")])],1),e._v(" "),s("el-dropdown-item",[e.permission.indexOf("user:student:delete")>=0?s("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(s){e.toDelete(t.row.stuId)}}},[e._v("删除")]):e._e()],1)],1)],1)]}}])})],1),e._v(" "),s("div",{staticClass:"page-div"},[s("el-pagination",{attrs:{"current-page":e.page.currentPage,"page-sizes":[10,15,20,30],"page-size":e.page.currentCount,layout:"total, sizes, prev, pager, next, jumper",total:e.page.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),s("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:this.$store.getters.loading,expression:"this.$store.getters.loading"}],attrs:{title:e.dialogTitle,visible:e.dialogFormVisible,width:"580px"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[s("el-form",{ref:"student",attrs:{rules:e.rules,inline:!0,model:e.student,"label-width":"80px",size:"mini"}},[s("el-form-item",{attrs:{label:"学号",prop:"stuNumber"}},[s("el-input",{attrs:{disabled:e.isdisabledFn,clearable:""},model:{value:e.student.stuNumber,callback:function(t){e.$set(e.student,"stuNumber",t)},expression:"student.stuNumber"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"性别",prop:"stuSex"}},[s("el-radio-group",{model:{value:e.student.stuSex,callback:function(t){e.$set(e.student,"stuSex",t)},expression:"student.stuSex"}},[s("el-radio",{attrs:{label:1}},[e._v("男")]),e._v(" "),s("el-radio",{attrs:{label:2}},[e._v("女")])],1)],1),e._v(" "),s("el-form-item",{attrs:{label:"密码",prop:"stuPassword"}},[s("el-input",{attrs:{clearable:"",type:"password"},model:{value:e.student.stuPassword,callback:function(t){e.$set(e.student,"stuPassword",t)},expression:"student.stuPassword"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"姓名",prop:"stuName"}},[s("el-input",{attrs:{clearable:""},model:{value:e.student.stuName,callback:function(t){e.$set(e.student,"stuName",t)},expression:"student.stuName"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"年龄",prop:"stuAge"}},[s("el-input",{attrs:{clearable:""},model:{value:e.student.stuAge,callback:function(t){e.$set(e.student,"stuAge",t)},expression:"student.stuAge"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"身份证号",prop:"stuCard"}},[s("el-input",{attrs:{clearable:""},model:{value:e.student.stuCard,callback:function(t){e.$set(e.student,"stuCard",t)},expression:"student.stuCard"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"学院",prop:"stuCollege"}},[s("el-select",{attrs:{filterable:"",placeholder:"请选择",clearable:""},on:{change:e.getSon},model:{value:e.student.stuCollege,callback:function(t){e.$set(e.student,"stuCollege",t)},expression:"student.stuCollege"}},e._l(e.collegeList,function(e){return s("el-option",{key:e.dictId,attrs:{label:e.dictName,value:e.dictId}})}))],1),e._v(" "),s("el-form-item",{attrs:{label:"入学时间",prop:"stuName"}},[s("el-date-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"选择时间","value-format":"yyyy-MM-dd"},model:{value:e.student.stuEntranceTime,callback:function(t){e.$set(e.student,"stuEntranceTime",t)},expression:"student.stuEntranceTime"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"专业"}},[s("el-select",{attrs:{filterable:"",placeholder:"必须先选择学院",clearable:""},model:{value:e.student.stuMajor,callback:function(t){e.$set(e.student,"stuMajor",t)},expression:"student.stuMajor"}},e._l(e.majorList0,function(e){return s("el-option",{key:e.dictId,attrs:{label:e.dictName,value:e.dictId}})}))],1),e._v(" "),s("el-form-item",{attrs:{label:"照片"}},[s("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:e.imgLoading,expression:"imgLoading"}],staticClass:"avatar-uploader",attrs:{action:"http://tn20898453.51mypc.cn/upload","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload,name:"file"}},[e.imageUrl?s("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):s("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),s("el-form-item",{staticClass:"stu-submit-part"},[s("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("提交")]),e._v(" "),s("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")])],1)],1)],1),e._v(" "),s("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:this.$store.getters.loading,expression:"this.$store.getters.loading"}],attrs:{title:"详细信息",visible:e.dialogResumeVisible,width:"580px"},on:{"update:visible":function(t){e.dialogResumeVisible=t}}},[s("el-form",{ref:"student",attrs:{rules:e.rules,inline:!0,model:e.student,"label-width":"80px",size:"mini","label-position":"right",disabled:!1}},[s("img",{staticClass:"avatar",staticStyle:{margin:"-6% 39% 2%"},attrs:{src:e.student.stuImg}}),e._v(" "),s("el-form-item",{attrs:{label:"学号",prop:"stuNumber"}},[s("el-input",{attrs:{disabled:e.isdisabledFn},model:{value:e.student.stuNumber,callback:function(t){e.$set(e.student,"stuNumber",t)},expression:"student.stuNumber"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"姓名",prop:"stuName"}},[s("el-input",{attrs:{disabled:e.isdisabledFn},model:{value:e.student.stuName,callback:function(t){e.$set(e.student,"stuName",t)},expression:"student.stuName"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"密码",prop:"stuPassword"}},[s("el-input",{attrs:{type:"password"},model:{value:e.student.stuPassword,callback:function(t){e.$set(e.student,"stuPassword",t)},expression:"student.stuPassword"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"性别",prop:"stuSex"}},[s("el-radio-group",{model:{value:e.student.stuSex,callback:function(t){e.$set(e.student,"stuSex",t)},expression:"student.stuSex"}},[s("el-radio",{attrs:{label:1}},[e._v("男")]),e._v(" "),s("el-radio",{attrs:{label:2}},[e._v("女")])],1)],1),e._v(" "),s("el-form-item",{attrs:{label:"身份证号",prop:"stuCard"}},[s("el-input",{attrs:{disabled:e.isdisabledFn},model:{value:e.student.stuCard,callback:function(t){e.$set(e.student,"stuCard",t)},expression:"student.stuCard"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"年龄",prop:"stuAge"}},[s("el-input",{model:{value:e.student.stuAge,callback:function(t){e.$set(e.student,"stuAge",t)},expression:"student.stuAge"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"手机号",prop:"stuMobile"}},[s("el-input",{model:{value:e.student.stuMobile,callback:function(t){e.$set(e.student,"stuMobile",t)},expression:"student.stuMobile"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"邮箱",prop:"stuEmail"}},[s("el-input",{model:{value:e.student.stuEmail,callback:function(t){e.$set(e.student,"stuEmail",t)},expression:"student.stuEmail"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"学院",prop:"stuCollege"}},[s("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:e.student.stuCollege,callback:function(t){e.$set(e.student,"stuCollege",t)},expression:"student.stuCollege"}},e._l(e.collegeList,function(e){return s("el-option",{key:e.dictId,attrs:{label:e.dictName,value:e.dictId}})}))],1),e._v(" "),s("el-form-item",{attrs:{label:"入学时间",prop:"stuName"}},[s("el-date-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"选择时间","value-format":"yyyy-MM-dd"},model:{value:e.student.stuEntranceTime,callback:function(t){e.$set(e.student,"stuEntranceTime",t)},expression:"student.stuEntranceTime"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"专业"}},[s("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:e.student.stuMajor,callback:function(t){e.$set(e.student,"stuMajor",t)},expression:"student.stuMajor"}},e._l(e.majorList,function(e){return s("el-option",{key:e.dictId,attrs:{label:e.dictName,value:e.dictId}})}))],1)],1)],1)],1)},[],!1,null,"d6eee5f2",null);g.options.__file="StudentList.vue";t.default=g.exports},twU4:function(e,t,s){"use strict";var a=s("t3Un");t.a={save:function(e){return""===e.dictId?Object(a.a)({url:"/dict/add",method:"post",data:e}):Object(a.a)({url:"/dict/update",method:"put",data:e})},list:function(e){return Object(a.a)({url:"/dict/list",method:"post",data:e})},get:function(e){return Object(a.a)({url:"/dict/get/"+e,method:"get"})},delete:function(e){return Object(a.a)({url:"/dict/delete/"+e,method:"delete"})},all:function(e){return Object(a.a)({url:"/dict/all",method:"post",data:e})},getByFather:function(e){return Object(a.a)({url:"/dict/childList/"+e,method:"get"})}}}}]);